Cross Site Scripting
Usually medium risk as low impact. Generally only affect user executing the vulnerability. 

Limited to browser's JS engine, therefore cannot execute system-wide JavaScript code for System Level Code Execution.

#### Three types of XSS
|Type|Description|
|---|---|
|`Stored (Persistent) XSS`|The most critical type of XSS, which occurs when user input is stored on the back-end database and then displayed upon retrieval (e.g., posts or comments)|
|`Reflected (Non-Persistent) XSS`|Occurs when user input is displayed on the page after being processed by the backend server, but without being stored (e.g., search result or error message)|
|`DOM-based XSS`|Another Non-Persistent XSS type that occurs when user input is directly shown in the browser and is completely processed on the client-side, without reaching the back-end server (e.g., through client-side HTTP parameters or anchor tags)|

Two types of Reflected XSS Dom based and Reflected.
Reflected gets processes on back end through http requests
Dom Based is processed on client side only through javascript changing dom models
#### Sink & Source
- Source is object that takes user input 
- Sinnk is function that writes user input to DOIM
	###### Popular Methods
	- document.write()
	- DOM.innerHTML
	- DOM.outerHTML
- __Jquery__
		Add()
		After()
		Append()


Sink functions do not allow script tags within them so there are other ways

```html
<img src="" onerror=alert(window.origin)>
```

With stored XSS web pages can be defaced by changing DOM using javascript
example 
## Defacing

When we want to change the text displayed on the web page, we can utilize various JavaScript functions for doing so. For example, we can change the text of a specific HTML element/DOM using the `innerHTML` function:

Code: javascript

```javascript
document.getElementById("todo").innerHTML = "New Text"
```

Using JQUERY 
```javascript
$("#todo").html('New Text');
```


## Phishing

We can use XSS to create a mock-up of the website for phishing on top of the legitimate website.

## Session Hijacking 
Using JavaScript we can steal cookies and preform session hijacking attack 
using XSS we can reference a local script that gets the cookie data and posts it to a controlled http server.


## XSS Prevention
- Front end validation with regex
- Input sanitisation with DOMPurify
- Using HTTPS across the entire domain.
- Using XSS prevention headers.
- Using the appropriate Content-Type for the page, like `X-Content-Type-Options=nosniff`.
- Using `Content-Security-Policy` options, like `script-src 'self'`, which only allows locally hosted scripts.
- Using the `HttpOnly` and `Secure` cookie flags to prevent JavaScript from reading cookies and only transport them over HTTPS.


